{% extends "base.html" %}
{% block content %}
<div class="card shadow-sm">
  <div class="card-header d-flex justify-content-between align-items-center">
    <div>Casos</div>
    <div>
      <select id="f-type" class="form-select form-select-sm" style="width:auto;display:inline-block;">
        <option value="">Todos</option>
        <option value="GOODS">GOODS</option>
        <option value="REMIT">REMIT</option>
      </select>
      <a href="/cases/new" class="btn btn-sm btn-primary">+ Nuevo Caso</a>
    </div>
  </div>
  <div class="card-body table-responsive">
    <table class="table table-striped" id="tbl-cases">
      <thead><tr><th>ID</th><th>Tipo</th><th>Estado</th><th>Creado</th></tr></thead>
      <tbody>
        {% for c in items %}
        <tr>
          <td><a href="/cases/{{ c.id }}">{{ c.id }}</a></td>
          <td>{{ c.case_type }}</td>
          <td>{{ c.state }}</td>
          <td>{{ c.created_at }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
<script>
const dt = new DataTable('#tbl-cases');
document.getElementById('f-type').onchange = (e) => {
  dt.column(1).search(e.target.value).draw();
};
</script>
{% endblock %}
